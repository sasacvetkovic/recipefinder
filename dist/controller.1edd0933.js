!function(){var n={};var e=function(e){var t=n[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t};(function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)n[t[r]]=e[t[r]]})(JSON.parse('{"70dd64475d2e4ccc":"controller.1edd0933.js","f0bb661506b575fa":"icons.c781f215.svg"}'));const t=async function(n){try{const t=await Promise.race([fetch(n),(e=10,new Promise((function(n,t){setTimeout((function(){t(new Error("Request took too long! Timeout after ".concat(e," second")))}),1e3*e)})))]),r=await t.json();if(!t.ok)throw new Error("".concat(r.message," ").concat(t.status));return r}catch(n){throw n}var e},r={recipe:{},search:{query:"",results:[],resultsPerPage:4,page:1}},a=function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.search.page;r.search.page=n;const e=(n-1)*r.search.resultsPerPage,t=n*r.search.resultsPerPage;return r.search.results.slice(e,t)};var i,o=null;var s,c,u,l=function(){return o||(o=function(){try{throw new Error}catch(e){var n=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(n)return(""+n[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),o},h=e;function d(n){if(""===n)return".";var e="/"===n[n.length-1]?n.slice(0,n.length-1):n,t=e.lastIndexOf("/");return-1===t?".":e.slice(0,t)}function p(n,e){if(n===e)return"";var t=n.split("/");"."===t[0]&&t.shift();var r,a,i=e.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<t.length)&&null==a;r++)t[r]!==i[r]&&(a=r);var o=[];for(r=0;r<t.length-a;r++)o.push("..");return i.length>a&&o.push.apply(o,i.slice(a)),o.join("/")}(s=function(n,e){return p(d(h(n)),h(e))})._dirname=d,s._relative=p,i=l()+s("70dd64475d2e4ccc","f0bb661506b575fa"),Fraction=function(n,e){if(void 0!==n&&e)"number"==typeof n&&"number"==typeof e?(this.numerator=n,this.denominator=e):"string"==typeof n&&"string"==typeof e&&(this.numerator=parseInt(n),this.denominator=parseInt(e));else if(void 0===e)if(num=n,"number"==typeof num)this.numerator=num,this.denominator=1;else if("string"==typeof num){var t,r,a=num.split(" ");if(a[0]&&(t=a[0]),a[1]&&(r=a[1]),t%1==0&&r&&r.match("/"))return new Fraction(t).add(new Fraction(r));if(!t||r)return;if("string"==typeof t&&t.match("/")){var i=t.split("/");this.numerator=i[0],this.denominator=i[1]}else{if("string"==typeof t&&t.match("."))return new Fraction(parseFloat(t));this.numerator=parseInt(t),this.denominator=1}}this.normalize()},Fraction.prototype.clone=function(){return new Fraction(this.numerator,this.denominator)},Fraction.prototype.toString=function(){if("NaN"===this.denominator)return"NaN";var n=this.numerator/this.denominator>0?Math.floor(this.numerator/this.denominator):Math.ceil(this.numerator/this.denominator),e=this.numerator%this.denominator,t=this.denominator,r=[];return 0!=n&&r.push(n),0!=e&&r.push((0===n?e:Math.abs(e))+"/"+t),r.length>0?r.join(" "):0},Fraction.prototype.rescale=function(n){return this.numerator*=n,this.denominator*=n,this},Fraction.prototype.add=function(n){var e=this.clone();return n=n instanceof Fraction?n.clone():new Fraction(n),td=e.denominator,e.rescale(n.denominator),n.rescale(td),e.numerator+=n.numerator,e.normalize()},Fraction.prototype.subtract=function(n){var e=this.clone();return n=n instanceof Fraction?n.clone():new Fraction(n),td=e.denominator,e.rescale(n.denominator),n.rescale(td),e.numerator-=n.numerator,e.normalize()},Fraction.prototype.multiply=function(n){var e=this.clone();if(n instanceof Fraction)e.numerator*=n.numerator,e.denominator*=n.denominator;else{if("number"!=typeof n)return e.multiply(new Fraction(n));e.numerator*=n}return e.normalize()},Fraction.prototype.divide=function(n){var e=this.clone();if(n instanceof Fraction)e.numerator*=n.denominator,e.denominator*=n.numerator;else{if("number"!=typeof n)return e.divide(new Fraction(n));e.denominator*=n}return e.normalize()},Fraction.prototype.equals=function(n){n instanceof Fraction||(n=new Fraction(n));var e=this.clone().normalize();n=n.clone().normalize();return e.numerator===n.numerator&&e.denominator===n.denominator},Fraction.prototype.normalize=(c=function(n){return"number"==typeof n&&(n>0&&n%1>0&&n%1<1||n<0&&n%-1<0&&n%-1>-1)},u=function(n,e){if(e){var t=Math.pow(10,e);return Math.round(n*t)/t}return Math.round(n)},function(){if(c(this.denominator)){var n=u(this.denominator,9),e=Math.pow(10,n.toString().split(".")[1].length);this.denominator=Math.round(this.denominator*e),this.numerator*=e}c(this.numerator)&&(n=u(this.numerator,9),e=Math.pow(10,n.toString().split(".")[1].length),this.numerator=Math.round(this.numerator*e),this.denominator*=e);var t=Fraction.gcf(this.numerator,this.denominator);return this.numerator/=t,this.denominator/=t,(this.numerator<0&&this.denominator<0||this.numerator>0&&this.denominator<0)&&(this.numerator*=-1,this.denominator*=-1),this}),Fraction.gcf=function(n,e){var t=[],r=Fraction.primeFactors(n),a=Fraction.primeFactors(e);return r.forEach((function(n){var e=a.indexOf(n);e>=0&&(t.push(n),a.splice(e,1))})),0===t.length?1:function(){var n,e=t[0];for(n=1;n<t.length;n++)e*=t[n];return e}()},Fraction.primeFactors=function(n){for(var e=Math.abs(n),t=[],r=2;r*r<=e;)e%r==0?(t.push(r),e/=r):r++;return 1!=e&&t.push(e),t};var f=Fraction;var m,g=(m=i)&&m.__esModule?m.default:m;function _(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var v=new class extends class{constructor(){var n,e,t;t=void 0,(e="_data")in(n=this)?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}render(n){if(!n||Array.isArray(n)&&0===n.length)return this.renderError();this._data=n;const e=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e)}renderSpinner(){const n='\n        <div class="spinner">\n          <svg>\n            <use href="'.concat(g,'#icon-loader"></use>\n          </svg>\n        </div> \n      ');this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}renderError(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._errorMessage;const e='\n      <div class="message">\n        <p>'.concat(n,'</p>\n        <svg>\n          <use href="').concat(g,'#icon-alert-triangle"></use>\n        </svg>\n      </div>\n      ');this._parentError.innerHTML="",this._parentError.insertAdjacentHTML("afterbegin",e)}_clear(){this._parentElement.innerHTML=""}}{constructor(){super(...arguments),_(this,"_parentElement",document.querySelector(".content-box")),_(this,"_parentError",document.querySelector(".search-results")),_(this,"_errorMessage","We could not find that recipe. Please try another one!")}_generateMarkup(){return'\n      <h1 class="heading--1">'.concat(this._data.title,'</h1>\n      <img src="').concat(this._data.image,'" class="main-img" alt="').concat(this._data.title,'" />\n      <div class="recipe__details">\n        <div class="recipe__info">\n          <svg class="recipe__info-icon">\n            <use href="').concat(g,'#icon-clock"></use>\n          </svg>\n          <span class="recipe__info-data recipe__info-data--minutes"\n            >').concat(this._data.cookingTime,'</span\n          >\n          <span class="recipe__info-text">minutes</span>\n        </div>\n        <div class="recipe__info">\n          <svg class="recipe__info-icon">\n            <use href="').concat(g,'#icon-users"></use>\n          </svg>\n          <span class="recipe__info-data recipe__info-data--people">').concat(this._data.servings,'</span>\n          <span class="recipe__info-text">servings</span>\n        </div>\n      </div>\n\n      <div class="recipe__ingredients">\n        <h2 class="heading--2">Recipe ingredients</h2>\n        <ul class="recipe__ingredient-list">\n\n      ').concat(this._data.ingredients.map(n=>this._generateMarkupIngredient(n)).join(""),"\n        </ul>\n      </div>\n    ")}_generateMarkupIngredient(n){return'\n        <li class="recipe__ingredient">\n          <svg class="recipe__icon">\n            <use href="'.concat(g,'#icon-check"></use>\n          </svg>\n          <div class="recipe__description">\n            <span class="recipe__unit">').concat(n.quantity?new f(n.quantity).toString():""," ").concat(n.unit,"</span>\n            ").concat(n.description,"\n          </div>\n        </li>\n      ")}addHandlerRender(n){["hashchange","load"].forEach(e=>addEventListener(e,n))}};var b=new class{constructor(){var n,e,t;n=this,e="_parentElement",t=document.querySelector(".search-box"),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}getQuery(){const n=this._parentElement.querySelector(".search-input").value;return this._parentElement.querySelector(".search-input").value="",n}addHandlerSearch(n){this._parentElement.addEventListener("submit",e=>{e.preventDefault(),n()})}};class y{constructor(){var n,e,t;t=void 0,(e="_data")in(n=this)?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}render(n){if(!n||Array.isArray(n)&&0===n.length)return this.renderError();this._data=n;const e=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e)}renderSpinner(){const n='\n        <div class="spinner">\n          <svg>\n            <use href="'.concat(g,'#icon-loader"></use>\n          </svg>\n        </div> \n      ');this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}renderError(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._errorMessage;const e='\n      <div class="message">\n        <p>'.concat(n,'</p>\n        <svg>\n          <use href="').concat(g,'#icon-alert-triangle"></use>\n        </svg>\n      </div>\n      ');this._parentError.innerHTML="",this._parentError.insertAdjacentHTML("afterbegin",e)}_clear(){this._parentElement.innerHTML=""}}function w(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var E=new class extends y{constructor(){super(...arguments),w(this,"_parentElement",document.querySelector(".search-results")),w(this,"_parentError",document.querySelector(".search-results")),w(this,"_errorMessage","No recipes found for your query! </br> Please, try another one. E.g 'pizza'")}_generateMarkup(){return this._data.map(n=>this._generateMarkupResult(n)).join("")}_generateMarkupResult(n){return'\n        <a href="#'.concat(n.id,'" class="preview">\n            <img\n            src="').concat(n.image,'"\n            class="preview-image"\n            />\n            <h3 class="preview-title">').concat(n.title,'</h3>\n            <h3 class="preview-author">Author: ').concat(n.publisher,"</h3>\n        </a> \n      ")}};var F=new class extends y{constructor(){var n,e,t;super(...arguments),n=this,e="_parentElement",t=document.querySelector(".pagination-container"),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t}addHandlerClick(n){this._parentElement.addEventListener("click",(function(e){const t=e.target.closest(".btn--inline");if(!t)return;const r=+t.dataset.goto;console.log(r),n(r)}))}_generateMarkup(){const n=this._data.page,e=Math.ceil(this._data.results.length/this._data.resultsPerPage);return 1===n&&e>1?'\n        <button data-goto="'.concat(n+1,'" class="btn--inline pagination__btn--next">\n            <span>Page ').concat(n+1,'</span>\n            <svg class="search__icon">\n                <use href="').concat(g,'#icon-arrow-right"></use>\n            </svg>\n        </button> \n      '):n===e&&e>1?'\n        <button data-goto="'.concat(n-1,'" class="btn--inline pagination__btn--prev">\n            <svg class="search__icon">\n                <use href="').concat(g,'#icon-arrow-left"></use>\n            </svg>\n            <span>Page ').concat(n-1,"</span>\n        </button>\n      \n      "):n<e?'\n        <button data-goto="'.concat(n-1,'" class="btn--inline pagination__btn--prev">\n            <svg class="search__icon">\n                <use href="').concat(g,'#icon-arrow-left"></use>\n            </svg>\n            <span>Page ').concat(n-1,'</span>\n        </button>\n\n        <button data-goto="').concat(n+1,'" class="btn--inline pagination__btn--next">\n            <span>Page ').concat(n+1,'</span>\n            <svg class="search__icon">\n                <use href="').concat(g,'#icon-arrow-right"></use>\n            </svg>\n        </button> \n      '):""}};const M=async function(){try{const n=window.location.hash.slice(1);if(!n)return;v.renderSpinner(),await async function(n){try{const e=await t("".concat("https://forkify-api.herokuapp.com/api/v2/recipes/").concat(n)),{recipe:a}=e.data;r.recipe={id:a.id,title:a.title,publisher:a.publisher,sourceUrl:a.source_url,image:a.image_url,servings:a.servings,cookingTime:a.cooking_time,ingredients:a.ingredients}}catch(n){throw n}}(n),v.render(r.recipe)}catch(n){v.renderError(),console.log("***** ".concat(n," *****"))}},k=async function(){try{const n=b.getQuery();if(!n)return;E.renderSpinner(),await async function(n){try{const e=await t("".concat("https://forkify-api.herokuapp.com/api/v2/recipes/","?search=").concat(n));r.search.results=e.data.recipes.map(n=>({id:n.id,title:n.title,publisher:n.publisher,image:n.image_url}))}catch(n){throw n}}(n),E.render(a()),F.render(r.search)}catch(n){console.log(n)}},P=function(n){E.render(a(n)),F.render(r.search)};v.addHandlerRender(M),b.addHandlerSearch(k),F.addHandlerClick(P)}();
//# sourceMappingURL=controller.1edd0933.js.map
